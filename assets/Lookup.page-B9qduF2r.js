var ve=t=>{throw TypeError(t)};var ne=(t,e,s)=>e.has(t)||ve("Cannot "+s);var n=(t,e,s)=>(ne(t,e,"read from private field"),s?s.call(t):e.get(t)),b=(t,e,s)=>e.has(t)?ve("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),m=(t,e,s,i)=>(ne(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),j=(t,e,s)=>(ne(t,e,"access private method"),s);import{S as Ve,p as we,r as B,s as ae,a as ee,n as We,i as oe,b as Ie,t as Ke,f as Ye,c as Je,d as Te,e as _e,g as w,u as Xe,h as Ze,k as Ne,l as U,m as te,o as et,j as r,I as Pe,q as Oe,v as Le,w as Me,x as tt,y as st,B as Ee,G as ce}from"./index-B6y8arDP.js";import{I as ke,C as Y,T as rt,S as nt,A as le,a as Ae,b as ze,c as Ge,d as it,e as at}from"./BuilderSelector-CTDTIVm9.js";import{g as z,C as W,G as I}from"./Grid-DHo2fbVK.js";import{T as L,a as M,B as ot,L as ct}from"./Title-D8ZIIoa4.js";var v,h,J,R,_,G,F,Q,X,q,$,N,P,D,H,d,K,he,ue,de,fe,pe,me,xe,qe,Ue,lt=(Ue=class extends Ve{constructor(e,s){super();b(this,d);b(this,v);b(this,h);b(this,J);b(this,R);b(this,_);b(this,G);b(this,F);b(this,Q);b(this,X);b(this,q);b(this,$);b(this,N);b(this,P);b(this,D);b(this,H,new Set);this.options=s,m(this,v,e),m(this,Q,null),m(this,F,we()),this.options.experimental_prefetchInRender||n(this,F).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(n(this,h).addObserver(this),Qe(n(this,h),this.options)?j(this,d,K).call(this):this.updateResult(),j(this,d,fe).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ge(n(this,h),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ge(n(this,h),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,j(this,d,pe).call(this),j(this,d,me).call(this),n(this,h).removeObserver(this)}setOptions(e,s){const i=this.options,l=n(this,h);if(this.options=n(this,v).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof B(this.options.enabled,n(this,h))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");j(this,d,xe).call(this),n(this,h).setOptions(this.options),i._defaulted&&!ae(this.options,i)&&n(this,v).getQueryCache().notify({type:"observerOptionsUpdated",query:n(this,h),observer:this});const c=this.hasListeners();c&&Be(n(this,h),l,this.options,i)&&j(this,d,K).call(this),this.updateResult(s),c&&(n(this,h)!==l||B(this.options.enabled,n(this,h))!==B(i.enabled,n(this,h))||ee(this.options.staleTime,n(this,h))!==ee(i.staleTime,n(this,h)))&&j(this,d,he).call(this);const o=j(this,d,ue).call(this);c&&(n(this,h)!==l||B(this.options.enabled,n(this,h))!==B(i.enabled,n(this,h))||o!==n(this,D))&&j(this,d,de).call(this,o)}getOptimisticResult(e){const s=n(this,v).getQueryCache().build(n(this,v),e),i=this.createResult(s,e);return ut(this,i)&&(m(this,R,i),m(this,G,this.options),m(this,_,n(this,h).state)),i}getCurrentResult(){return n(this,R)}trackResult(e,s){const i={};return Object.keys(e).forEach(l=>{Object.defineProperty(i,l,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(l),s==null||s(l),e[l])})}),i}trackProp(e){n(this,H).add(e)}getCurrentQuery(){return n(this,h)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=n(this,v).defaultQueryOptions(e),i=n(this,v).getQueryCache().build(n(this,v),s);return i.fetch().then(()=>this.createResult(i,s))}fetch(e){return j(this,d,K).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),n(this,R)))}createResult(e,s){var Re;const i=n(this,h),l=this.options,c=n(this,R),o=n(this,_),p=n(this,G),x=e!==i?e.state:n(this,J),{state:u}=e;let a={...u},g=!1,y;if(s._optimisticResults){const S=this.hasListeners(),k=!S&&Qe(e,s),A=S&&Be(e,i,s,l);(k||A)&&(a={...a,...Je(u.data,e.options)}),s._optimisticResults==="isRestoring"&&(a.fetchStatus="idle")}let{error:T,errorUpdatedAt:O,status:C}=a;if(s.select&&a.data!==void 0)if(c&&a.data===(o==null?void 0:o.data)&&s.select===n(this,X))y=n(this,q);else try{m(this,X,s.select),y=s.select(a.data),y=Te(c==null?void 0:c.data,y,s),m(this,q,y),m(this,Q,null)}catch(S){m(this,Q,S)}else y=a.data;if(s.placeholderData!==void 0&&y===void 0&&C==="pending"){let S;if(c!=null&&c.isPlaceholderData&&s.placeholderData===(p==null?void 0:p.placeholderData))S=c.data;else if(S=typeof s.placeholderData=="function"?s.placeholderData((Re=n(this,$))==null?void 0:Re.state.data,n(this,$)):s.placeholderData,s.select&&S!==void 0)try{S=s.select(S),m(this,Q,null)}catch(k){m(this,Q,k)}S!==void 0&&(C="success",y=Te(c==null?void 0:c.data,S,s),g=!0)}n(this,Q)&&(T=n(this,Q),y=n(this,q),O=Date.now(),C="error");const V=a.fetchStatus==="fetching",se=C==="pending",re=C==="error",Ce=se&&V,Se=y!==void 0,E={status:C,fetchStatus:a.fetchStatus,isPending:se,isSuccess:C==="success",isError:re,isInitialLoading:Ce,isLoading:Ce,data:y,dataUpdatedAt:a.dataUpdatedAt,error:T,errorUpdatedAt:O,failureCount:a.fetchFailureCount,failureReason:a.fetchFailureReason,errorUpdateCount:a.errorUpdateCount,isFetched:a.dataUpdateCount>0||a.errorUpdateCount>0,isFetchedAfterMount:a.dataUpdateCount>x.dataUpdateCount||a.errorUpdateCount>x.errorUpdateCount,isFetching:V,isRefetching:V&&!se,isLoadingError:re&&!Se,isPaused:a.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:re&&Se,isStale:ye(e,s),refetch:this.refetch,promise:n(this,F)};if(this.options.experimental_prefetchInRender){const S=Z=>{E.status==="error"?Z.reject(E.error):E.data!==void 0&&Z.resolve(E.data)},k=()=>{const Z=m(this,F,E.promise=we());S(Z)},A=n(this,F);switch(A.status){case"pending":e.queryHash===i.queryHash&&S(A);break;case"fulfilled":(E.status==="error"||E.data!==A.value)&&k();break;case"rejected":(E.status!=="error"||E.error!==A.reason)&&k();break}}return E}updateResult(e){const s=n(this,R),i=this.createResult(n(this,h),this.options);if(m(this,_,n(this,h).state),m(this,G,this.options),n(this,_).data!==void 0&&m(this,$,n(this,h)),ae(i,s))return;m(this,R,i);const l={},c=()=>{if(!s)return!0;const{notifyOnChangeProps:o}=this.options,p=typeof o=="function"?o():o;if(p==="all"||!p&&!n(this,H).size)return!0;const f=new Set(p??n(this,H));return this.options.throwOnError&&f.add("error"),Object.keys(n(this,R)).some(x=>{const u=x;return n(this,R)[u]!==s[u]&&f.has(u)})};(e==null?void 0:e.listeners)!==!1&&c()&&(l.listeners=!0),j(this,d,qe).call(this,{...l,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&j(this,d,fe).call(this)}},v=new WeakMap,h=new WeakMap,J=new WeakMap,R=new WeakMap,_=new WeakMap,G=new WeakMap,F=new WeakMap,Q=new WeakMap,X=new WeakMap,q=new WeakMap,$=new WeakMap,N=new WeakMap,P=new WeakMap,D=new WeakMap,H=new WeakMap,d=new WeakSet,K=function(e){j(this,d,xe).call(this);let s=n(this,h).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(We)),s},he=function(){j(this,d,pe).call(this);const e=ee(this.options.staleTime,n(this,h));if(oe||n(this,R).isStale||!Ie(e))return;const i=Ke(n(this,R).dataUpdatedAt,e)+1;m(this,N,setTimeout(()=>{n(this,R).isStale||this.updateResult()},i))},ue=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(n(this,h)):this.options.refetchInterval)??!1},de=function(e){j(this,d,me).call(this),m(this,D,e),!(oe||B(this.options.enabled,n(this,h))===!1||!Ie(n(this,D))||n(this,D)===0)&&m(this,P,setInterval(()=>{(this.options.refetchIntervalInBackground||Ye.isFocused())&&j(this,d,K).call(this)},n(this,D)))},fe=function(){j(this,d,he).call(this),j(this,d,de).call(this,j(this,d,ue).call(this))},pe=function(){n(this,N)&&(clearTimeout(n(this,N)),m(this,N,void 0))},me=function(){n(this,P)&&(clearInterval(n(this,P)),m(this,P,void 0))},xe=function(){const e=n(this,v).getQueryCache().build(n(this,v),this.options);if(e===n(this,h))return;const s=n(this,h);m(this,h,e),m(this,J,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},qe=function(e){_e.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(n(this,R))}),n(this,v).getQueryCache().notify({query:n(this,h),type:"observerResultsUpdated"})})},Ue);function ht(t,e){return B(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Qe(t,e){return ht(t,e)||t.state.data!==void 0&&ge(t,e,e.refetchOnMount)}function ge(t,e,s){if(B(e.enabled,t)!==!1){const i=typeof s=="function"?s(t):s;return i==="always"||i!==!1&&ye(t,e)}return!1}function Be(t,e,s,i){return(t!==e||B(i.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&ye(t,s)}function ye(t,e){return B(e.enabled,t)!==!1&&t.isStaleByTime(ee(e.staleTime,t))}function ut(t,e){return!ae(t.getCurrentResult(),e)}var $e=w.createContext(!1),dt=()=>w.useContext($e);$e.Provider;function ft(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var pt=w.createContext(ft()),mt=()=>w.useContext(pt);function xt(t,e){return typeof t=="function"?t(...e):!!t}function Fe(){}var gt=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},yt=t=>{w.useEffect(()=>{t.clearReset()},[t])},jt=({result:t,errorResetBoundary:e,throwOnError:s,query:i})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&xt(s,[t.error,i]),bt=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},Ct=(t,e)=>t.isLoading&&t.isFetching&&!e,St=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,De=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Rt(t,e,s){var a,g,y,T,O;const i=Xe(),l=dt(),c=mt(),o=i.defaultQueryOptions(t);(g=(a=i.getDefaultOptions().queries)==null?void 0:a._experimental_beforeQuery)==null||g.call(a,o),o._optimisticResults=l?"isRestoring":"optimistic",bt(o),gt(o,c),yt(c);const p=!i.getQueryCache().get(o.queryHash),[f]=w.useState(()=>new e(i,o)),x=f.getOptimisticResult(o),u=!l&&t.subscribed!==!1;if(w.useSyncExternalStore(w.useCallback(C=>{const V=u?f.subscribe(_e.batchCalls(C)):Fe;return f.updateResult(),V},[f,u]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),w.useEffect(()=>{f.setOptions(o,{listeners:!1})},[o,f]),St(o,x))throw De(o,f,c);if(jt({result:x,errorResetBoundary:c,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash)}))throw x.error;if((T=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||T.call(y,o,x),o.experimental_prefetchInRender&&!oe&&Ct(x,l)){const C=p?De(o,f,c):(O=i.getQueryCache().get(o.queryHash))==null?void 0:O.promise;C==null||C.catch(Fe).finally(()=>{f.updateResult()})}return o.notifyOnChangeProps?x:f.trackResult(x)}function vt(t,e){return Rt(t,lt)}function wt({spacing:t,verticalSpacing:e,cols:s,selector:i}){var u;const l=Ze(),c=e===void 0?t:e,o=Ne({"--sg-spacing-x":U(z(t)),"--sg-spacing-y":U(z(c)),"--sg-cols":(u=z(s))==null?void 0:u.toString()}),p=te(l.breakpoints).reduce((a,g)=>(a[g]||(a[g]={}),typeof t=="object"&&t[g]!==void 0&&(a[g]["--sg-spacing-x"]=U(t[g])),typeof c=="object"&&c[g]!==void 0&&(a[g]["--sg-spacing-y"]=U(c[g])),typeof s=="object"&&s[g]!==void 0&&(a[g]["--sg-cols"]=s[g]),a),{}),x=et(te(p),l.breakpoints).filter(a=>te(p[a.value]).length>0).map(a=>({query:`(min-width: ${l.breakpoints[a.value]})`,styles:p[a.value]}));return r.jsx(Pe,{styles:o,media:x,selector:i})}function ie(t){return typeof t=="object"&&t!==null?te(t):[]}function It(t){return t.sort((e,s)=>Oe(e)-Oe(s))}function Tt({spacing:t,verticalSpacing:e,cols:s}){const i=Array.from(new Set([...ie(t),...ie(e),...ie(s)]));return It(i)}function Ot({spacing:t,verticalSpacing:e,cols:s,selector:i}){var x;const l=e===void 0?t:e,c=Ne({"--sg-spacing-x":U(z(t)),"--sg-spacing-y":U(z(l)),"--sg-cols":(x=z(s))==null?void 0:x.toString()}),o=Tt({spacing:t,verticalSpacing:e,cols:s}),p=o.reduce((u,a)=>(u[a]||(u[a]={}),typeof t=="object"&&t[a]!==void 0&&(u[a]["--sg-spacing-x"]=U(t[a])),typeof l=="object"&&l[a]!==void 0&&(u[a]["--sg-spacing-y"]=U(l[a])),typeof s=="object"&&s[a]!==void 0&&(u[a]["--sg-cols"]=s[a]),u),{}),f=o.map(u=>({query:`simple-grid (min-width: ${u})`,styles:p[u]}));return r.jsx(Pe,{styles:c,container:f,selector:i})}var He={container:"m_925c2d2c",root:"m_2415a157"};const Et={cols:1,spacing:"md",type:"media"},je=Le((t,e)=>{const s=Me("SimpleGrid",Et,t),{classNames:i,className:l,style:c,styles:o,unstyled:p,vars:f,cols:x,verticalSpacing:u,spacing:a,type:g,...y}=s,T=tt({name:"SimpleGrid",classes:He,props:s,className:l,style:c,classNames:i,styles:o,unstyled:p,vars:f}),O=st();return g==="container"?r.jsxs(r.Fragment,{children:[r.jsx(Ot,{...s,selector:`.${O}`}),r.jsx("div",{...T("container"),children:r.jsx(Ee,{ref:e,...T("root",{className:O}),...y})})]}):r.jsxs(r.Fragment,{children:[r.jsx(wt,{...s,selector:`.${O}`}),r.jsx(Ee,{ref:e,...T("root",{className:O}),...y})]})});je.classes=He;je.displayName="@mantine/core/SimpleGrid";const Qt={},be=Le((t,e)=>{const s=Me("TextInput",Qt,t);return r.jsx(ke,{component:"input",ref:e,...s,__staticSelector:"TextInput"})});be.classes=ke.classes;be.displayName="@mantine/core/TextInput";const Bt=t=>vt({queryKey:["todos"],queryFn:()=>Ft(t)}),Ft=async t=>{const e=await fetch(`https://sync.runescape.wiki/runelite/player/${t}/STANDARD`);if(!e.ok)throw new Error("User data not found");return await e.json()},Gt=()=>{const[t,e]=w.useState(""),[s,i]=w.useState(!1),l=()=>{t.trim()!==""&&t&&i(!0)},c=o=>{i(!1),e(o)};return r.jsx(r.Fragment,{children:r.jsxs(W,{style:{minHeight:"100%",flexDirection:"column"},children:[r.jsx(L,{order:1,children:"OSRS Account Lookup"}),r.jsx(M,{size:"lg",c:"dimmed",style:{marginBottom:"20px"},children:"Enter your account name to see your achievements, quests, and stats."}),r.jsx(be,{value:t,onChange:o=>c(o.target.value),placeholder:"Enter OSRS username",label:"Account Name",style:{width:"100%",maxWidth:400,marginBottom:"20px"}}),r.jsx(ot,{onClick:l,style:{marginBottom:"20px"},children:"Search"}),s&&r.jsx(Nt,{userName:t})]})})},Dt=({user:t,selectedBuilders:e,setSelectedBuilders:s})=>{const i=Object.entries(t.levels);return r.jsxs(Y,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[r.jsx(W,{children:r.jsx(L,{order:3,children:t.username})}),r.jsx(W,{children:r.jsx(M,{size:"sm",c:"dimmed",children:`Last updated: ${t.timestamp}`})}),r.jsx(W,{children:r.jsx(L,{order:4,style:{marginTop:"20px"},children:"Skills"})}),r.jsx(je,{cols:3,style:{marginTop:"10px",padding:"16px",justifyItems:"center"},children:i.map(([l,c])=>r.jsxs(M,{children:[l,": ",c]}))}),r.jsx(W,{children:r.jsx(nt,{selectedBuilders:e,setSelectedBuilders:s})})]})},Ut=({addQuestToList:t,selectedBuilders:e,quests:s})=>{const[i,l]=w.useState(!1),c=o=>{switch(o){case 0:return{text:"Not Started",color:"red"};case 1:return{text:"In Progress",color:"yellow"};case 2:return{text:"Completed",color:"green"};default:return{text:"Unknown",color:"gray"}}};return r.jsx(r.Fragment,{children:r.jsxs(Y,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[r.jsxs(ce,{style:{marginTop:"20px"},children:[r.jsx(L,{order:4,children:"Quests"}),r.jsx(le,{onClick:()=>l(o=>!o),children:i?r.jsx(Ae,{size:16}):r.jsx(ze,{size:16})})]}),r.jsx(Ge,{in:i,children:r.jsx(I,{style:{marginTop:"10px"},children:r.jsx(I.Col,{span:12,children:r.jsx("ul",{children:Object.entries(s).map(([o,p])=>{const{text:f,color:x}=c(p),u=Object.entries(it).find(([O,C])=>C.fullName===o),a=u==null?void 0:u[1],g=e.includes((a==null?void 0:a.builderName)??""),y=!!u,T=!!u||f==="Completed";return r.jsx("ul",{children:r.jsxs(ce,{children:[r.jsx(le,{disabled:!y||g,variant:"filled",size:"sm","aria-label":"Settings",onClick:()=>t(a==null?void 0:a.builderName),children:r.jsx(at,{style:{width:"70%",height:"70%"},stroke:1.5})}),r.jsxs(M,{c:T?x:"orange",children:[o,":"," ",T?f:"Not Implemented Yet"]})]})},o)})})})})})]})})},_t=({user:t})=>{const[e,s]=w.useState(!1);return r.jsxs(r.Fragment,{children:[" ",r.jsxs(Y,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:[r.jsxs(ce,{style:{marginTop:"20px"},children:[r.jsx(L,{order:4,children:"Achievement Diaries"}),r.jsx(le,{onClick:()=>s(i=>!i),children:e?r.jsx(Ae,{size:16}):r.jsx(ze,{size:16})})]}),r.jsx(Ge,{in:e,children:r.jsx(I,{style:{marginTop:"10px"},children:r.jsx(I.Col,{span:12,children:Object.entries(t.achievement_diaries).map(([i,l])=>r.jsxs("div",{children:[r.jsx(L,{order:5,children:i}),Object.entries(l).map(([c,{complete:o,tasks:p}])=>{const f=p.filter(u=>u===!0).length,x=f/p.length*100;return r.jsxs(Y,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,style:{marginBottom:"10px"},children:[r.jsxs(L,{order:6,children:[c," Diaries"]}),r.jsx(M,{children:o?"Completed":"Not Completed"}),r.jsxs(M,{children:["Tasks: ",f,"/",p.length," (",x.toFixed(2),"%)"]})]},c)})]},i))})})})]})]})},Nt=({userName:t})=>{const{data:e,isLoading:s,error:i}=Bt(t),[l,c]=w.useState([]),o=p=>{p&&c([...l,p])};return r.jsxs(r.Fragment,{children:[s&&r.jsx(ct,{size:"lg"}),i&&r.jsxs(M,{color:"red",children:["Error: ",i.message]}),e&&r.jsxs(I,{style:{width:"100%",maxWidth:"95%"},gutter:"md",children:[r.jsx(I.Col,{span:6,children:r.jsxs(I,{children:[r.jsxs(I.Col,{span:12,children:[" ",r.jsx(Dt,{user:e,selectedBuilders:l,setSelectedBuilders:c})]}),r.jsx(I.Col,{span:12,children:r.jsx(Ut,{quests:e.quests,selectedBuilders:l,addQuestToList:o})}),r.jsx(I.Col,{span:12,children:r.jsx(_t,{user:e})})]})}),r.jsx(I.Col,{span:6,children:r.jsx(I,{gutter:"md",children:r.jsx(I.Col,{span:12,children:r.jsx(Y,{shadow:"sm",padding:"lg",radius:"md",withBorder:!0,children:r.jsx(rt,{selectedBuilders:l,setSelectedBuilders:c})})})})})]})]})};export{Gt as default};
